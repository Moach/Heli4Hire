/*%FSM<COMPILE "E:\Bohemia Interactive Tools\FSM Editor Personal Edition\scriptedFSM.cfg, HeliWorks_Commute">*/
/*%FSM<HEAD>*/
/*
item0[] = {"comply_",2,250,-323.180084,1062.351563,-233.180054,1112.351563,0.000000,"comply!"};
item1[] = {"avail",4,218,-323.353790,1144.254395,-233.353836,1194.254395,0.000000,"avail"};
item2[] = {"land",4,218,-323.717010,1443.854248,-233.716278,1493.854248,1.000000,"land"};
item3[] = {"pickup",2,250,-323.167450,1240.147705,-233.167419,1290.147705,0.000000,"pickup"};
item4[] = {"land",4,218,-295.241730,1925.142578,-205.241913,1975.142578,1.000000,"land"};
item5[] = {"deboard",2,250,27.048214,2013.610107,117.048187,2063.609375,0.000000,"deboard"};
item6[] = {"away",4,218,27.067078,2100.774414,117.067307,2150.775391,0.000000,"away"};
item7[] = {"now_boarding___",2,250,-329.349762,1522.347046,-227.503113,1571.162354,0.000000,"now boarding..."};
item8[] = {"clear",1,250,27.319611,2199.822266,117.319931,2249.822266,0.000000,"clear"};
item9[] = {"timeout",4,218,-425.687408,1492.168457,-335.687164,1542.168457,0.000000,"timeout"};
item10[] = {"done",4,218,27.126804,1924.884888,117.126968,1974.884888,0.000000,"done"};
item11[] = {"wait_for_it___",2,250,-128.765167,1926.277344,-35.657391,1973.799194,0.000000,"wait for it..."};
item12[] = {"fail___abort",4,218,-492.734589,2001.514038,-346.389557,2076.683838,2.000000,"fail / abort"};
item13[] = {"just_put__it_dow",2,250,-287.930786,2014.662842,-207.224777,2063.479004,0.000000,"just put " \n "it down"};
item14[] = {"land_ASAP",4,218,-123.685081,2014.159790,-33.685204,2064.156738,0.000000,"land ASAP"};
item15[] = {"running_late",4,218,-202.914352,1240.386719,-112.914383,1290.386719,1.000000,"running late"};
item16[] = {"you_re_late",2,250,-195.620239,1313.970581,-119.762047,1362.815552,0.000000,"you're late"};
item17[] = {"too_late",4,218,-79.117683,1314.196777,10.882305,1364.196777,2.000000,"too late"};
item18[] = {"you_fucked_it",1,250,71.006248,1313.825562,161.006287,1363.825562,0.000000,"you fucked it"};
item19[] = {"all_aboard",4,218,-474.442383,1520.594604,-384.441833,1570.594604,0.000000,"all aboard"};
item20[] = {"go_fly_",2,250,-439.359070,1696.978638,-375.423401,1761.706543,0.000000,"go fly!"};
item21[] = {"abort_pickup",4,218,-392.783752,1313.449097,-302.783997,1363.449097,2.000000,"abort" \n "pickup"};
item22[] = {"quit",1,250,-528.910156,1313.438721,-438.909973,1363.438721,0.000000,"quit"};
item23[] = {"simple_flight",8,218,-202.926117,1701.911255,-142.803421,1756.890869,0.000000,"simple" \n "flight"};
item24[] = {"on_the_way",2,250,-295.253601,1800.252930,-205.253647,1850.252930,0.000000,"on the way"};
item25[] = {"field_landing",4,218,-593.144836,1704.515015,-503.144836,1754.515015,1.000000,"field" \n "landing"};
item26[] = {"see_if_you_can_land",2,218,-612.093018,1800.258179,-522.093018,1850.258179,0.000000,"see if" \n "you can" \n "land there"};
item27[] = {"__PD__not_gonna",4,218,-470.255157,1788.637207,-341.000824,1860.824341,0.000000,"-PD-" \n "not gonna" \n "happen"};
item28[] = {"",7,210,-570.654419,1946.165894,-562.654419,1954.165894,0.000000,""};
item29[] = {"go_",2,218,-745.002014,1704.530029,-655.002014,1754.530029,0.000000,"go!"};
item30[] = {"approach",4,218,-817.921753,1800.217773,-727.921753,1850.217773,0.000000,"approach"};
item31[] = {"",7,210,-703.906555,2035.560059,-695.906555,2043.560547,0.000000,""};
item32[] = {"go__1",0,250,-514.399780,992.344055,-424.399506,1042.345215,0.000000,"go!"};
item33[] = {"ok",8,218,-320.521973,991.996033,-230.522003,1041.996094,0.000000,"ok"};
item34[] = {"certified",4,218,-175.744293,1802.601685,-97.803055,1847.963745,0.000000,"certified"};
item35[] = {"cat_in_hospital",4,218,176.094376,1656.154297,266.094116,1706.154297,1.000000,"cat in" \n "hospital"};
item36[] = {"shit_happens",4,218,-297.757538,1654.710693,-202.866837,1707.156128,0.000000,"shit" \n "happens"};
item37[] = {"what_is_it_",2,250,67.807655,1643.928345,141.911530,1718.505859,0.000000,"what is it?"};
item38[] = {"kidney_stone",4,218,137.691254,1754.794189,227.691223,1804.794189,2.000000,"kidney" \n "stone"};
item39[] = {"",7,210,-665.021301,1676.596313,-657.021301,1684.596313,0.000000,""};
item40[] = {"divert",8,218,-1.620945,1755.362305,88.379128,1805.362305,0.000000,"divert"};
item41[] = {"loo",4,218,116.950897,1557.260254,206.951050,1607.260254,3.000000,"loo"};
item42[] = {"LZ_type_",2,250,-117.123337,1756.396973,-66.773361,1804.720459,0.000000,"LZ" \n "type?"};
item43[] = {"not",4,218,-133.127991,1854.322754,-50.548790,1903.395142,1.000000,"not"};
item44[] = {"flying_to_it_",2,250,-685.562439,1855.527222,-625.005310,1902.295532,0.000000,"flying" \n "to it!"};
item45[] = {"nearest_hospital",2,250,538.221680,1755.522949,628.221802,1805.522949,0.000000,"nearest" \n "hospital"};
item46[] = {"specific_hospita",2,250,328.428741,1657.010254,418.428284,1707.010254,0.000000,"specific" \n "hospital"};
item47[] = {"FAST_",2,250,245.021362,1557.399170,335.021240,1607.399170,0.000000,"FAST!"};
item48[] = {"land_fast_",4,218,328.472534,1901.012207,418.472534,1951.012207,0.000000,"land" \n "fast!"};
item49[] = {"too_long",4,218,469.283539,1902.976929,559.283875,1952.976929,0.000000,"too long"};
item50[] = {"it_s_still_an__e",2,250,469.268005,2016.427612,559.268311,2066.427246,0.000000,"it's still an" \n " emergency"};
item51[] = {"are_we_there_yet",4,218,312.043762,2012.013062,415.497894,2069.351563,0.000000,"are we" \n "there yet?"};
item52[] = {"uber_fail",4,218,244.966736,1799.459839,334.966705,1849.459839,0.000000,"uber" \n "fail"};
item53[] = {"omg___",2,250,218.240143,1861.029175,287.447968,1897.574463,0.000000,"omg..."};
item54[] = {"land_anywhere_",4,218,236.000381,1467.227783,351.685577,1536.797485,0.000000,"land" \n "anywhere!"};
item55[] = {"out__then_back_in",2,250,23.384541,1477.751343,113.384567,1527.751343,0.000000,"out, then" \n "back in again" \n "shortly"};
item56[] = {"where__were_we_",4,218,-31.266874,1562.073364,69.740860,1616.965820,0.000000,"where " \n "were we?"};
item57[] = {"emergency_deboar",2,4346,165.544189,2015.337646,255.544174,2065.336426,0.000000,"emergency" \n "deboard"};
link0[] = {0,1};
link1[] = {1,3};
link2[] = {2,7};
link3[] = {3,2};
link4[] = {3,15};
link5[] = {3,21};
link6[] = {4,11};
link7[] = {5,6};
link8[] = {6,8};
link9[] = {7,9};
link10[] = {7,19};
link11[] = {9,20};
link12[] = {10,5};
link13[] = {11,10};
link14[] = {12,13};
link15[] = {13,14};
link16[] = {14,5};
link17[] = {15,16};
link18[] = {16,2};
link19[] = {16,17};
link20[] = {16,21};
link21[] = {17,18};
link22[] = {19,20};
link23[] = {20,23};
link24[] = {20,25};
link25[] = {21,22};
link26[] = {23,24};
link27[] = {24,4};
link28[] = {24,12};
link29[] = {24,36};
link30[] = {25,29};
link31[] = {26,12};
link32[] = {26,27};
link33[] = {26,28};
link34[] = {26,39};
link35[] = {27,24};
link36[] = {28,4};
link37[] = {29,30};
link38[] = {29,31};
link39[] = {29,39};
link40[] = {30,26};
link41[] = {31,12};
link42[] = {32,33};
link43[] = {33,0};
link44[] = {34,24};
link45[] = {35,46};
link46[] = {36,37};
link47[] = {37,35};
link48[] = {37,38};
link49[] = {37,40};
link50[] = {37,41};
link51[] = {38,45};
link52[] = {39,36};
link53[] = {40,42};
link54[] = {41,47};
link55[] = {42,34};
link56[] = {42,43};
link57[] = {43,44};
link58[] = {44,30};
link59[] = {44,31};
link60[] = {45,48};
link61[] = {45,49};
link62[] = {46,48};
link63[] = {46,49};
link64[] = {47,52};
link65[] = {47,54};
link66[] = {48,57};
link67[] = {49,50};
link68[] = {50,51};
link69[] = {51,57};
link70[] = {52,53};
link71[] = {53,51};
link72[] = {54,55};
link73[] = {55,56};
link74[] = {56,42};
link75[] = {57,6};
globals[] = {0.000000,0,0,0,0,640,480,1,151,0,1,-241.593445,309.876648,2388.482910,1698.135132,683,855,1};
window[] = {0,-1,-1,-1,-1,988,74,1570,19,1,701};
*//*%FSM</HEAD>*/
class FSM
{
  fsmName = "HeliWorks_Commute";
  class States
  {
    /*%FSM<STATE "comply_">*/
    class comply_
    {
      name = "comply_";
      init = /*%FSM<STATEINIT""">*/"" \n
       "_go = false;" \n
       "" \n
       "central sideRadio ""HW_Radio_Taxi_Commit"";" \n
       "" \n
       "_t = time + 3 + (random 5);" \n
       "" \n
       "_pos = _this select 0;" \n
       "" \n
       "_shT= 0;" \n
       "_shitHappens=false;" \n
       "" \n
       "_tsk = player createSimpleTask [""-CURRENT ASSIGNMENT-""];" \n
       "_tsk setSimpleTaskDescription [""You are currently assigned (i.e. not 'Able') and cannot request another task until clear"", ""-CURRENT ASSIGNMENT-"", ""Current Destination""];" \n
       "_tsk setSimpleTaskDestination _pos;" \n
       "" \n
       "_range = player distance _pos;" \n
       "_late = 0;" \n
       ""/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "avail">*/
        class avail
        {
          priority = 0.000000;
          to="pickup";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"time > _t;"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "pickup">*/
    class pickup
    {
      name = "pickup";
      init = /*%FSM<STATEINIT""">*/"hintSilent ""stand by..."";" \n
       "//_locDefs = _locDefs_lineup call bis_fnc_selectrandom;" \n
       "" \n
       "" \n
       "[_this select 0, _this select 1] call HW_Fx_Util_Clear_Cranes;" \n
       "" \n
       "" \n
       "_pax =  [PaxDefs_taxi call bis_fnc_selectRandom, PaxDefs_taxi call bis_fnc_selectRandom, PaxDefs_taxi call bis_fnc_selectRandom];" \n
       "_pps =  [[6,-6,0],[7,-6,0],[6,-7,0]];" \n
       "" \n
       "_grp = [_pos, side player,_pax, _pps, [], [], [], [1,.75]] call BIS_fnc_spawnGroup;" \n
       "" \n
       "" \n
       "{ _x setDir ([_x, _pos] call bis_fnc_dirto); } foreach units _grp;" \n
       "units _grp call HW_Fx_Util_Animate_Idle;" \n
       "" \n
       "" \n
       "_mkr = createMarker [""Departure"", _pos];" \n
       "_mkr setMarkerType ""hd_pickup"";" \n
       "_mkr setmarkerText ""Departure"";" \n
       "" \n
       "" \n
       "_t = time + 60 + (_range * .05);" \n
       "" \n
       "_eta =  [daytime + ((_t - time)*28e-5), ""HH:MM""] call bis_fnc_timeToString;" \n
       "hint format[ ""Got %1 waiting for you, go pick 'em up!\n\n you're %2km's out, arrival expected by %3"", " \n
       "	count units _grp, round(_range*.01)*.1, _eta];" \n
       "" \n
       "" \n
       "" \n
       "2 setRadioMsg ""Declare Unable"";" \n
       "" \n
       "" \n
       "" \n
       ""/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "abort_pickup">*/
        class abort_pickup
        {
          priority = 2.000000;
          to="quit";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"RadioCall_B; "/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "running_late">*/
        class running_late
        {
          priority = 1.000000;
          to="you_re_late";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"(time > _t) && (player distance _pos > 400);"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "land">*/
        class land
        {
          priority = 1.000000;
          to="now_boarding___";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"(player distance (leader _grp) < 250) && (speed (vehicle player) < 1) && (isTouchingGround (vehicle player)) && (collectiveRTD (vehicle player) <= .01);"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "deboard">*/
    class deboard
    {
      name = "deboard";
      init = /*%FSM<STATEINIT""">*/"" \n
       "Heli_Cabin_Condition = Heli_Cabin_Condition - (random .12); // passengers will eventually mess up the cabin as they go...." \n
       "" \n
       "" \n
       "if (PilotFail) then  " \n
       "{ " \n
       "	terminate _steady;" \n
       "	hintSilent ""You blew that one big time! good luck explaining that to the man upstairs..."";" \n
       "" \n
       "	bis_genericSentenceMode = .5;" \n
       "	[""FeedbackGeneralNo"", (leader _grp)] call bis_fnc_genericSentence;" \n
       "	" \n
       "	if (PilotFailFurther) then" \n
       "	{" \n
       "		Heli_Cabin_Condition = 0;" \n
       "		[] spawn {" \n
       "			sleep 5;" \n
       "			hint ""Do you smell that? \nSeems your little stunt caused a passenger to foul up the cabin... \nyep, you got some urgent cleaning to do!\nHead back to base and grab a bucket!"";" \n
       "		};" \n
       "	} else" \n
       "	{" \n
       "		[] spawn {" \n
       "			sleep 5+random(10);" \n
       "			central sideRadio ""HW_Radio_Taxi_Epic_Fail"";" \n
       "		};" \n
       "	};" \n
       "" \n
       "} else" \n
       "{" \n
       "	 if (RadioCall_B) then" \n
       "	{" \n
       "		RadioCall_B = false;" \n
       "" \n
       "		bis_genericSentenceMode = .4;" \n
       "		[""FeedbackGeneralBad"",  (leader _grp)] call bis_fnc_genericSentence;" \n
       "	" \n
       "		if(_abortEnroute) then" \n
       "		{" \n
       "			" \n
       "		//	hintSilent ""Roger, we got a fix on your location - tell your passengers to stand by and make sure you apologize your ass off..."";" \n
       "			central sideRadio ""HW_Radio_Taxi_Abort_Landed"";" \n
       "			1 setRadioMsg ""Cfm. Fix on Location"";" \n
       "" \n
       "		} else" \n
       "		{" \n
       "			central sideRadio ""HW_Radio_Unable"";" \n
       "			1 setRadioMsg ""Confirm Aborted"";" \n
       "		};" \n
       "" \n
       "	} else" \n
       "	{" \n
       "		deleteMarker _mkr;" \n
       "		player removeSimpleTask _tsk;" \n
       "		_go = false;" \n
       "" \n
       "		hint ""Nice flying! give dispatch a call when you're ready for another"";" \n
       "		" \n
       "		bis_genericSentenceMode = 1;" \n
       "		[""AmbienceHeliportFarewell"",  (leader _grp)] call bis_fnc_genericSentence;" \n
       "	};" \n
       "};" \n
       "" \n
       "_grp leaveVehicle (vehicle player);  // everyone out" \n
       "doGetOut units _grp;                       // i mean it!" \n
       "units _grp allowGetIn false;             // OUT! NOW!! - beat it!" \n
       "" \n
       "// now, go somewhere, don't just stand around being idiots..." \n
       "" \n
       "(units _grp) doMove ((nearestBuilding chopper) buildingExit 0);" \n
       "1 setRadioMsg ""Rpt. Clear of Assignment"";" \n
       "" \n
       "" \n
       "" \n
       "" \n
       ""/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "away">*/
        class away
        {
          priority = 0.000000;
          to="clear";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"(player distance (leader _grp) > 100)"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "now_boarding___">*/
    class now_boarding___
    {
      name = "now_boarding___";
      init = /*%FSM<STATEINIT""">*/"if (_late==0) then " \n
       "{" \n
       "	hintSilent ""Passengers now boarding..."";" \n
       "} else {" \n
       "" \n
       "	hintSilent ""OMG! Finally.... hold on for boarding..."";" \n
       "};" \n
       "" \n
       "" \n
       "2 setRadioMsg ""NULL"";" \n
       "_go = false;" \n
       "" \n
       "" \n
       "// if you're landed at terrain level (not on a rooftop or anything) we can use the regular AI to board the chopper, " \n
       "// otherwise it's best to warp 'em in lest we get all sorts of pathfinding nonsense..." \n
       "//" \n
       "" \n
       "PaxBoarded = 0;     // this is used to check passengers boarding without being forced to..." \n
       "(units _grp) call HW_Fx_Util_Animate_Off;" \n
       "" \n
       "" \n
       "// we decide if boarding is ok to do without forcing by checking for a vertical distance between the chopper and the group leader..." \n
       "// anything over 1m is too much for this - then we use a shorter timeout and don't even bother telling AI to get in..." \n
       "" \n
       "if ( abs((getPosASL (leader _grp) select 2) - (getPosASL (vehicle player) select 2)) > 1 ) then " \n
       "{" \n
       "	_t = (time + 3) + (random 7);" \n
       "" \n
       "} else" \n
       "{" \n
       "	// put everyone aboard by telling them to like normal people..." \n
       "	" \n
       "	{" \n
       "		_x assignAsCargo (vehicle player);" \n
       "	} foreach units _grp;" \n
       "" \n
       " 	(leader _grp) assignAsTurret [(vehicle player),[0]]; // override leader to seat in the front" \n
       "	units _grp orderGetIn true;" \n
       "" \n
       "	 (vehicle player) addEventHandler [""GetIn"", " \n
       "	{ " \n
       "		if (_this select 2 != player) then // YOU don't count!" \n
       "		{" \n
       "			PaxBoarded = PaxBoarded +1;" \n
       "		};" \n
       "	 }];" \n
       "" \n
       "	_t = time + 30; // if pax aren't aboard in 30 seconds, that's usually due to some problem, so we force them in" \n
       "};" \n
       "" \n
       "" \n
       "	" \n
       "" \n
       "" \n
       ""/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "all_aboard">*/
        class all_aboard
        {
          priority = 0.000000;
          to="go_fly_";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"PaxBoarded == count units _grp;"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "timeout">*/
        class timeout
        {
          priority = 0.000000;
          to="go_fly_";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"time > _t;"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/"{" \n
           "	_x moveInCargo (vehicle player);" \n
           "} foreach units _grp;" \n
           "" \n
           "(leader _grp) moveInTurret [(vehicle player),[0]]; // override leader to seat in the front" \n
           "units _grp orderGetIn true;" \n
           ""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "clear">*/
    class clear
    {
      name = "clear";
      init = /*%FSM<STATEINIT""">*/"{ deleteVehicle _x; } foreach units _grp;" \n
       "deleteGroup _grp;" \n
       "" \n
       "" \n
       ""/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "wait_for_it___">*/
    class wait_for_it___
    {
      name = "wait_for_it___";
      init = /*%FSM<STATEINIT""">*/"" \n
       "2 setRadioMsg ""NULL""; // no aborts during deboarding..." \n
       "" \n
       "terminate _steady;" \n
       "terminate _enrouteLogic;" \n
       "_go = false;" \n
       "" \n
       "if (PD_Armed) then" \n
       "{" \n
       "	call HW_Fx_PD_Clear;" \n
       "	hintSilent ""Nice! This is just the spot!\nThanks for taking the trouble to land out here!\n\nPassengers now deboarding..."";" \n
       "" \n
       "} else" \n
       "{" \n
       "	hintSilent ""Passengers now deboarding..."";" \n
       "};" \n
       "" \n
       "" \n
       "" \n
       "_t = (time + 3) + (random 5);" \n
       "" \n
       "" \n
       "" \n
       ""/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "done">*/
        class done
        {
          priority = 0.000000;
          to="deboard";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"time > _t;"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "just_put__it_dow">*/
    class just_put__it_dow
    {
      name = "just_put__it_dow";
      init = /*%FSM<STATEINIT""">*/"terminate _steady;" \n
       "terminate _enrouteLogic;" \n
       "2 setRadioMsg ""NULL"";" \n
       "" \n
       "PilotFailFurther = false; // yep - you CAN still make it worse!" \n
       "_abortEnroute = false;" \n
       "" \n
       "if (PD_Armed) then { call HW_Fx_PD_Clear; };" \n
       "" \n
       "{ _x lookAt ObjNull; } foreach units _grp;" \n
       "" \n
       "if PilotFail then " \n
       "{ " \n
       "	hint ""OMG! you're insane! put us down, put us down NOW!""; " \n
       "	_steady = [  player, _pos, nil, [20,1.2,42], 15, { PilotFailFurther = true; hintSilent ""MAKE IT STOP!! WE'RE GONNA DIE!!!!"";}] spawn BIS_fnc_wpSteady;" \n
       "	" \n
       "} else" \n
       "{" \n
       "	if (!(isTouchingGround (vehicle player))) then" \n
       "	{	" \n
       "		central sideRadio ""HW_Radio_Taxi_Enroute_Abort"";	" \n
       "		_abortEnroute = true;" \n
       "	};" \n
       "};" \n
       "" \n
       "deleteMarker _mkr;" \n
       "player removeSimpleTask _tsk;" \n
       "_go = false;" \n
       "" \n
       ""/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "land_ASAP">*/
        class land_ASAP
        {
          priority = 0.000000;
          to="deboard";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"(speed (vehicle player) < 1) && (isTouchingGround (vehicle player)) && (collectiveRTD (vehicle player) <= .15);"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "you_re_late">*/
    class you_re_late
    {
      name = "you_re_late";
      init = /*%FSM<STATEINIT""">*/"if (player distance _pos < _range * .2 && _late==0) then" \n
       "{" \n
       "	_late = 1;" \n
       "	_range = player distance _pos;" \n
       "	_t = time + 35 + (_range * .01); " \n
       "" \n
       "	central sideRadio ""HW_Radio_Taxi_Little_Late"";" \n
       "} else" \n
       "{" \n
       "	_late = 2;" \n
       "	" \n
       "};"/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "too_late">*/
        class too_late
        {
          priority = 2.000000;
          to="you_fucked_it";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"_late == 2;"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "abort_pickup">*/
        class abort_pickup
        {
          priority = 2.000000;
          to="quit";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"RadioCall_B; "/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "land">*/
        class land
        {
          priority = 1.000000;
          to="now_boarding___";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"(player distance (leader _grp) < 250) && (speed (vehicle player) < 1) && (isTouchingGround (vehicle player)) && (collectiveRTD (vehicle player) <= .01);"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "you_fucked_it">*/
    class you_fucked_it
    {
      name = "you_fucked_it";
      init = /*%FSM<STATEINIT""">*/"{ deleteVehicle _x; } foreach units _grp;" \n
       "deleteGroup _grp;" \n
       "" \n
       "" \n
       "" \n
       "deleteMarker _mkr;" \n
       "player removeSimpleTask _tsk;" \n
       "_go = false;" \n
       "" \n
       "central sideRadio ""HW_Radio_Taxi_Too_Late"";" \n
       "" \n
       "" \n
       "1 setRadioMsg ""Apologize back into duty"";" \n
       "2 setRadioMsg ""NULL"";"/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "go_fly_">*/
    class go_fly_
    {
      name = "go_fly_";
      init = /*%FSM<STATEINIT""">*/"" \n
       "" \n
       "playSound ""Doors"";" \n
       "" \n
       "" \n
       "" \n
       "" \n
       "PilotFail = false;" \n
       "" \n
       "2 setRadioMsg ""Decl. Unable and Drop"";" \n
       "RadioCall_B = false; " \n
       "" \n
       "_fieldMode=false;" \n
       "" \n
       "" \n
       "bis_genericSentenceMode =1;" \n
       "[""AmbienceHeliportGreeting"", (leader _grp) ] call BIS_fnc_genericSentence;" \n
       "" \n
       "" \n
       "if ((random 10) < 2.5) then // chance of something more interesing going on..." \n
       "{" \n
       "	_d = chopper distance (_this select 1);" \n
       "	_r =  (_d) * .007;" \n
       "	_shT = time + 45 + (_r * (random 1)) + (_r * (random 1)); // you may be able to outspeed the event... with luck..." \n
       "	" \n
       "/*	if (HW_DEBUG) then " \n
       "	{" \n
       "		titleText [ format [""Murphy Effect Timer Set to %1\n\n distance: %2\n delta: 45 -- %3 \n\nDEBUG: Call Code-C to expedite"", _shT - time, _d, _r], ""PLAIN DOWN""];" \n
       "	};" \n
       "*/" \n
       "" \n
       "};" \n
       "" \n
       "" \n
       "if (HW_DEBUG) then " \n
       "{" \n
       "	3 setRadioMsg ""DEBUG: Murphy Effect!"";" \n
       "};"/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "field_landing">*/
        class field_landing
        {
          priority = 1.000000;
          to="go_";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"(random 10) > 5; // 50-50 shot at a non-regulation LZ being requested"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/"_pos = _this select 1;" \n
           "_pos = [[[_pos,4000], survey_safe_zone], [""water"",""out""], {(_this distance _pos) < 4000}] call BIS_fnc_randomPos;" \n
           "" \n
           "_appRange = 2000 + random 1200;" \n
           "" \n
           "_mkr setMarkerType ""hd_objective"";" \n
           "_mkr setMarkerPos [_pos select 0, _pos select 1];" \n
           "_mkr setMarkerText ""Can you land around here?"";" \n
           "_mkr setMarkerType ""hd_end"";" \n
           "_mkr setMarkerColor ""ColorBlue"";" \n
           "" \n
           "_landRange = 400;" \n
           "" \n
           "_tsk setSimpleTaskDestination _pos;" \n
           "_go = true;" \n
           "" \n
           "" \n
           "_steady = [" \n
           "	 player,_pos, nil, [10,1.0,35], 15, " \n
           "	{ PilotFail = true; }" \n
           "] spawn BIS_fnc_wpSteady;" \n
           "" \n
           "_fieldMode=true;" \n
           "" \n
           "hintSilent ""Ok, we're good to go!\nNow, i'm not sure how good our destination is gonna be for landing, so see what you can do when we get there..."";" \n
           "" \n
           "" \n
           "_enrouteLogic = [ (leader _grp), _pos ] spawn " \n
           "{" \n
           "	sleep 6;" \n
           "" \n
           "	bis_genericSentenceMode = .5; // 50-50 chance he doesn't say anything past ""hello""" \n
           "	if (round(random 3) > 1.5) then // chance of the guy's inane chatter not bringing up the weather...." \n
           "	{" \n
           "		[""AmbienceGeneralSeattle"", _this select 0] call BIS_fnc_genericSentence;" \n
           "		" \n
           "	} else // then weather it is!" \n
           "	{ " \n
           "		if (overcast > .5) then" \n
           "		{	" \n
           "			[""AmbienceHeliportWeatherBad"", _this select 0] call BIS_fnc_genericSentence;" \n
           "		} else" \n
           "		{" \n
           "			[""AmbienceHeliportWeatherGood"", _this select 0] call BIS_fnc_genericSentence;" \n
           "		};" \n
           "	} ;" \n
           "	" \n
           "	_close = 1000 + random 1500; // the approach talk comes in anywhere between 1 and 2.5 clicks out..." \n
           "	waitUntil { (vehicle player) distance (_this select 1) < _close };" \n
           "	" \n
           "	bis_genericSentenceMode = .8; // most pax will say something when getting close to their destination" \n
           "	[""AmbienceFlightApproach"", _this select 0] call BIS_fnc_genericSentence;" \n
           "};" \n
           ""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "simple_flight">*/
        class simple_flight
        {
          priority = 0.000000;
          to="on_the_way";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"true"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/"" \n
           "" \n
           "" \n
           "_pos = _this select 1;" \n
           "" \n
           "_mkr setMarkerType ""hd_objective"";" \n
           "_mkr setmarkerText ""Arrival"";" \n
           "_mkr setMarkerPos [_pos select 0, _pos select 1];" \n
           "" \n
           "_tsk setSimpleTaskDestination _pos;" \n
           "_go = true;" \n
           "" \n
           "" \n
           "" \n
           "_steady = [" \n
           "	 player,_pos, nil, [10,1.0,35], 15, " \n
           "	{ PilotFail = true; }" \n
           "] spawn BIS_fnc_wpSteady;" \n
           "" \n
           "" \n
           " hintSilent ""Take it away! - This is a nice and easy flight landing at a verified site\nshould be absolutely no problem, is that not?"";" \n
           "" \n
           "" \n
           "_enrouteLogic = [ (leader _grp), _pos ] spawn " \n
           "{" \n
           "	sleep 6;" \n
           "" \n
           "	bis_genericSentenceMode = .5; // 50-50 chance he doesn't say anything past ""hello""" \n
           "	if (round(random 3) > 1.5) then // chance of the guy's inane chatter not bringing up the weather...." \n
           "	{" \n
           "		[""AmbienceGeneralSeattle"", _this select 0] call BIS_fnc_genericSentence;" \n
           "		" \n
           "	} else // then weather it is!" \n
           "	{ " \n
           "		if (overcast > .5) then" \n
           "		{	" \n
           "			[""AmbienceHeliportWeatherBad"", _this select 0] call BIS_fnc_genericSentence;" \n
           "		} else" \n
           "		{" \n
           "			[""AmbienceHeliportWeatherGood"", _this select 0] call BIS_fnc_genericSentence;" \n
           "		};" \n
           "	} ;" \n
           "	" \n
           "	_close = 1000 + random 1500; // the approach talk comes in anywhere between 1 and 2.5 clicks out..." \n
           "	waitUntil { (vehicle player) distance (_this select 1) < _close };" \n
           "	" \n
           "	bis_genericSentenceMode = .8; // most pax will say something when getting close to their destination" \n
           "	[""AmbienceFlightApproach"", _this select 0] call BIS_fnc_genericSentence;" \n
           "};" \n
           ""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "quit">*/
    class quit
    {
      name = "quit";
      init = /*%FSM<STATEINIT""">*/"{ deleteVehicle _x; } foreach units _grp;" \n
       "deleteGroup _grp;" \n
       "" \n
       "" \n
       "deleteMarker _mkr;" \n
       "player removeSimpleTask _tsk;" \n
       "_go = false;" \n
       "" \n
       "central sideRadio ""HW_Radio_Unable"";" \n
       "" \n
       "" \n
       "RadioCall_B = false;" \n
       "2 setRadioMsg ""NULL"";" \n
       "" \n
       "1 setRadioMsg ""Confirm Unable""; // ready to go again!" \n
       "" \n
       "" \n
       ""/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "on_the_way">*/
    class on_the_way
    {
      name = "on_the_way";
      init = /*%FSM<STATEINIT""">*/"_landRange = 250;"/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "fail___abort">*/
        class fail___abort
        {
          priority = 2.000000;
          to="just_put__it_dow";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"PilotFail || RadioCall_B;"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "land">*/
        class land
        {
          priority = 1.000000;
          to="wait_for_it___";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"_go &&  (player distance _pos < _landRange) && (speed (vehicle player) < 1) && (isTouchingGround (vehicle player)) && (collectiveRTD (vehicle player) <= .01);"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "shit_happens">*/
        class shit_happens
        {
          priority = 0.000000;
          to="what_is_it_";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"((_shT > 0) && (time > _shT)) || (HW_Debug && RadioCall_C)"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/"if (HW_DEBUG) then " \n
           "{" \n
           "	RadioCall_C=false;" \n
           "	3 setRadioMsg ""NULL"";" \n
           "};"/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "see_if_you_can_land">*/
    class see_if_you_can_land
    {
      name = "see_if_you_can_land";
      init = /*%FSM<STATEINIT""">*/"" \n
       "[[""PD: Cannot safely land there!""]] call HW_Fx_PD_Prompt;" \n
       "" \n
       "hintSilent ""Ok, we should be somewhere close now, so check the area and see what it's gonna be like to land there...\n[Pilot Decision Available!]"";"/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "fail___abort">*/
        class fail___abort
        {
          priority = 2.000000;
          to="just_put__it_dow";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"PilotFail || RadioCall_B;"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "land">*/
        class land
        {
          priority = 1.000000;
          to="wait_for_it___";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"_go &&  (player distance _pos < _landRange) && (speed (vehicle player) < 1) && (isTouchingGround (vehicle player)) && (collectiveRTD (vehicle player) <= .01);"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "shit_happens">*/
        class shit_happens
        {
          priority = 0.000000;
          to="what_is_it_";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"((_shT > 0) && (time > _shT)) || (HW_Debug && RadioCall_C)"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/"if (HW_DEBUG) then " \n
           "{" \n
           "	RadioCall_C=false;" \n
           "	3 setRadioMsg ""NULL"";" \n
           "};"/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "__PD__not_gonna">*/
        class __PD__not_gonna
        {
          priority = 0.000000;
          to="on_the_way";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"PilotDecision == 1;"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/"call HW_Fx_PD_Clear;" \n
           "" \n
           "" \n
           "hintSilent ""Oh, shoot! that's inconvenient...\nBut better safe than sorry, i guess... \nOh well, take us down the nearest safe area, even if it's a private property, i'll deal with it..."";" \n
           "" \n
           "_pos = locationPosition (nearestLocations [_pos, LocDefs_Taxi, 5000] select 0);" \n
           "" \n
           "_mkr setMarkerType ""hd_objective"";" \n
           "_mkr setmarkerText ""Arrival"";" \n
           "" \n
           "_mkr setMarkerPos [_pos select 0, _pos select 1];" \n
           "_mkr setMarkerColor ""Default"";" \n
           "" \n
           "_tsk setSimpleTaskDestination _pos;"/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "go_">*/
    class go_
    {
      name = "go_";
      init = /*%FSM<STATEINIT""">*/""/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "fail___abort">*/
        class fail___abort
        {
          priority = 2.000000;
          to="just_put__it_dow";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"PilotFail || RadioCall_B;"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "shit_happens">*/
        class shit_happens
        {
          priority = 0.000000;
          to="what_is_it_";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"((_shT > 0) && (time > _shT)) || (HW_Debug && RadioCall_C)"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/"if (HW_DEBUG) then " \n
           "{" \n
           "	RadioCall_C=false;" \n
           "	3 setRadioMsg ""NULL"";" \n
           "};"/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "approach">*/
        class approach
        {
          priority = 0.000000;
          to="see_if_you_can_land";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"(chopper distance _pos) < _appRange;"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "go__1">*/
    class go__1
    {
      name = "go__1";
      init = /*%FSM<STATEINIT""">*/""/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "ok">*/
        class ok
        {
          priority = 0.000000;
          to="comply_";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/""/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "what_is_it_">*/
    class what_is_it_
    {
      name = "what_is_it_";
      init = /*%FSM<STATEINIT""">*/"_shitHappens=true;" \n
       "_shT=0; // not again!" \n
       "" \n
       "terminate _enrouteLogic;" \n
       "terminate _steady;" \n
       "" \n
       "" \n
       "2 setRadioMsg ""NULL"";  // no aborts at this time..." \n
       "" \n
       "_diceRoll= random 100;"/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "loo">*/
        class loo
        {
          priority = 3.000000;
          to="FAST_";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"false"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "kidney_stone">*/
        class kidney_stone
        {
          priority = 2.000000;
          to="nearest_hospital";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"_diceRoll > 90"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "cat_in_hospital">*/
        class cat_in_hospital
        {
          priority = 1.000000;
          to="specific_hospita";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"_diceRoll > 70"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "divert">*/
        class divert
        {
          priority = 0.000000;
          to="LZ_type_";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/""/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/"" \n
           "" \n
           "_near = nearestLocations [getPos chopper, LocDefs_taxi, 12000];" \n
           "_pos = locationPosition (_near call BIS_fnc_selectRandom);" \n
           "" \n
           "_t = time + 7; // delay for situational awareness..." \n
           "" \n
           "2 setRadioMsg ""Decl. Unable and Drop""; // this will be mighty bad for your reputation, you know..." \n
           "RadioCall_B = false; " \n
           "" \n
           "_appRange = 2000 + random 1200;" \n
           "" \n
           "if (random 3 > 1) then" \n
           "{" \n
           "	_fieldMode=true;" \n
           "	_pos = [[[_pos, 4000], survey_safe_zone], [""water"",""out""], {(_this distance _pos) < 4000}] call BIS_fnc_randomPos;" \n
           "" \n
           "	_mkr setMarkerType ""hd_objective"";" \n
           "	_mkr setMarkerPos [_pos select 0, _pos select 1];" \n
           "	_mkr setMarkerText ""Can you land around here?"";" \n
           "	_mkr setMarkerType ""hd_end"";" \n
           "	_mkr setMarkerColor ""ColorBlue"";" \n
           "	" \n
           "	hint ""Well, I just got a call, turns out we're not going to our destination after all...\nWe'll be heading out to this other place, but see - i'm not sure how landing there is gonna work...\nI guess we'll know when we arrive, right?"";" \n
           "	" \n
           "} else" \n
           "{" \n
           "	_fieldMode=false;" \n
           "	_mkr setMarkerPos [_pos select 0, _pos select 1];" \n
           "	_mkr setMarkerText ""Divert to Here!"";" \n
           "	_mkr setMarkerColor ""Default"";" \n
           "" \n
           "	hint ""Hey, uh... I just got an important call, seems we're gonna have to take a detour here, this is something i gotta get to right now...\nSo take us there, ok?"";" \n
           "};" \n
           "" \n
           "" \n
           "" \n
           "_steady = [" \n
           "	 player,_pos, nil, [10,1.0,35], 15, " \n
           "	{ PilotFail = true; }" \n
           "] spawn BIS_fnc_wpSteady;" \n
           "" \n
           ""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "LZ_type_">*/
    class LZ_type_
    {
      name = "LZ_type_";
      init = /*%FSM<STATEINIT""">*/""/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "not">*/
        class not
        {
          priority = 1.000000;
          to="flying_to_it_";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"_fieldMode && time > _t;"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/"_landRange = 400;" \n
           "_tsk setSimpleTaskDestination _pos;" \n
           ""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "certified">*/
        class certified
        {
          priority = 0.000000;
          to="on_the_way";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"time > _t"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/"_landRange = 250;" \n
           "_tsk setSimpleTaskDestination _pos;" \n
           ""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "flying_to_it_">*/
    class flying_to_it_
    {
      name = "flying_to_it_";
      init = /*%FSM<STATEINIT""">*/""/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "fail___abort">*/
        class fail___abort
        {
          priority = 2.000000;
          to="just_put__it_dow";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"PilotFail || RadioCall_B;"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "approach">*/
        class approach
        {
          priority = 0.000000;
          to="see_if_you_can_land";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"(chopper distance _pos) < _appRange;"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "nearest_hospital">*/
    class nearest_hospital
    {
      name = "nearest_hospital";
      init = /*%FSM<STATEINIT""">*/"_near = nearestLocations [getPos chopper, [""HeliportHospital"", ""HeliportTrauma""], 30000];" \n
       "_pos = locationPosition (_near select 0);" \n
       "" \n
       "" \n
       "hint ""Gasp, AARGH!!\nOMG! OMFG! I think i'm passing a kidney stone!!\n\n Hospital!... Hospital NOW!"";" \n
       "" \n
       "" \n
       "_fieldMode=false;" \n
       "_mkr setMarkerPos [_pos select 0, _pos select 1];" \n
       "_mkr setMarkerText ""Hospital! NOW!"";" \n
       "_mkr setMarkerColor ""Default"";" \n
       "" \n
       "_landRange=250;" \n
       "" \n
       "_t = time + 10 + (chopper distance _pos)* .016; // be VERY quick about it!" \n
       "" \n
       "[_pos, _tsk] spawn " \n
       "{" \n
       "	sleep 5;" \n
       "	(_this select 1) setSimpleTaskDestination (_this select 0);	" \n
       "};" \n
       "" \n
       ""/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "too_long">*/
        class too_long
        {
          priority = 0.000000;
          to="it_s_still_an__e";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"time > _t && (chopper distance _pos) > 300;"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/"hintSilent ""My God, Man! Where is this hospital already?!!\nWe're taking way too long, c'mon!"";"/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "land_fast_">*/
        class land_fast_
        {
          priority = 0.000000;
          to="emergency_deboar";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"_go &&  (player distance _pos < _landRange) && (speed (vehicle player) < 1) && (isTouchingGround (vehicle player)) && (collectiveRTD (vehicle player) <= .2);"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/"hintSilent ""Thanks, man! - I owe you one!"";"/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "specific_hospita">*/
    class specific_hospita
    {
      name = "specific_hospita";
      init = /*%FSM<STATEINIT""">*/"_near = nearestLocations [getPos chopper, [""HeliportHospital"", ""HeliportTrauma""], 30000];" \n
       "_pos = locationPosition (_near call BIS_fnc_selectRandom);" \n
       "" \n
       "" \n
       "hint ""OMG! - I just got a text, and.. There's been an accident!! My Cat is in the hospital!! Forget our destination, we gotta get there right now!!"";" \n
       "" \n
       "" \n
       "_fieldMode=false;" \n
       "_mkr setMarkerPos [_pos select 0, _pos select 1];" \n
       "_mkr setMarkerText ""This is the Hospital!"";" \n
       "_mkr setMarkerColor ""Default"";" \n
       "" \n
       "_landRange=250;" \n
       "" \n
       "_t = time + 10 +  (chopper distance _pos)* .0165; // be quick about it!" \n
       "" \n
       "[_pos, _tsk] spawn " \n
       "{" \n
       "	sleep 7;" \n
       "	(_this select 1) setSimpleTaskDestination (_this select 0);	" \n
       "};" \n
       "" \n
       ""/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "too_long">*/
        class too_long
        {
          priority = 0.000000;
          to="it_s_still_an__e";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"time > _t && (chopper distance _pos) > 300;"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/"hintSilent ""My God, Man! Where is this hospital already?!!\nWe're taking way too long, c'mon!"";"/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "land_fast_">*/
        class land_fast_
        {
          priority = 0.000000;
          to="emergency_deboar";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"_go &&  (player distance _pos < _landRange) && (speed (vehicle player) < 1) && (isTouchingGround (vehicle player)) && (collectiveRTD (vehicle player) <= .2);"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/"hintSilent ""Thanks, man! - I owe you one!"";"/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "FAST_">*/
    class FAST_
    {
      name = "FAST_";
      init = /*%FSM<STATEINIT""">*/""/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "land_anywhere_">*/
        class land_anywhere_
        {
          priority = 0.000000;
          to="out__then_back_in";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/""/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
        /*%FSM<LINK "uber_fail">*/
        class uber_fail
        {
          priority = 0.000000;
          to="omg___";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/""/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "it_s_still_an__e">*/
    class it_s_still_an__e
    {
      name = "it_s_still_an__e";
      init = /*%FSM<STATEINIT""">*/""/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "are_we_there_yet">*/
        class are_we_there_yet
        {
          priority = 0.000000;
          to="emergency_deboar";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"_go &&  (player distance _pos < _landRange) && (speed (vehicle player) < 1) && (isTouchingGround (vehicle player)) && (collectiveRTD (vehicle player) <= .2);"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "omg___">*/
    class omg___
    {
      name = "omg___";
      init = /*%FSM<STATEINIT""">*/""/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "are_we_there_yet">*/
        class are_we_there_yet
        {
          priority = 0.000000;
          to="emergency_deboar";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"_go &&  (player distance _pos < _landRange) && (speed (vehicle player) < 1) && (isTouchingGround (vehicle player)) && (collectiveRTD (vehicle player) <= .2);"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "out__then_back_in">*/
    class out__then_back_in
    {
      name = "out__then_back_in";
      init = /*%FSM<STATEINIT""">*/""/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "where__were_we_">*/
        class where__were_we_
        {
          priority = 0.000000;
          to="LZ_type_";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/""/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
    /*%FSM<STATE "emergency_deboar">*/
    class emergency_deboar
    {
      name = "emergency_deboar";
      init = /*%FSM<STATEINIT""">*/"" \n
       "_grp leaveVehicle (vehicle player);  // everyone out" \n
       "doGetOut units _grp;                       // i mean it!" \n
       "units _grp allowGetIn false;             // OUT! NOW!! - beat it!" \n
       "" \n
       "_grp setSpeedMode ""FULL"";" \n
       "(units _grp) doMove ((nearestBuilding chopper) buildingExit 0);" \n
       "" \n
       "1 setRadioMsg ""Rpt. Clear of Assignment"";" \n
       "" \n
       "deleteMarker _mkr;" \n
       "player removeSimpleTask _tsk;"/*%FSM</STATEINIT""">*/;
      precondition = /*%FSM<STATEPRECONDITION""">*/""/*%FSM</STATEPRECONDITION""">*/;
      class Links
      {
        /*%FSM<LINK "away">*/
        class away
        {
          priority = 0.000000;
          to="clear";
          precondition = /*%FSM<CONDPRECONDITION""">*/""/*%FSM</CONDPRECONDITION""">*/;
          condition=/*%FSM<CONDITION""">*/"(player distance (leader _grp) > 100)"/*%FSM</CONDITION""">*/;
          action=/*%FSM<ACTION""">*/""/*%FSM</ACTION""">*/;
        };
        /*%FSM</LINK>*/
      };
    };
    /*%FSM</STATE>*/
  };
  initState="go__1";
  finalStates[] =
  {
    "clear",
    "you_fucked_it",
    "quit",
  };
};
/*%FSM</COMPILE>*/